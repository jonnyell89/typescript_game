# typescript_game

# Minesweeper

Minesweeper is a logic puzzle game. The game features a grid of cells that contain hidden values. The hidden values can either be empty, a number or a mine. The aim of the game is to plant a flag on all cells that contain a mine. This is done by revealing the hidden value of all other cells. If the user selects an empty cell, all connected empty cells and their adjacent numbered cells are revealed. If the user selects a cell containing a number, the number refers to the number of mines immediately adjacent to that cell. If the user selects a cell containing a mine, the game is over, and the user has lost. The user must use the cells that contain numbers to determine which cells contain mines and which cells can be safely selected. The game ends when all cells that do not contain a mine have been revealed, or when the user accidentally selects a mine, and loses the game.

# HTML

- [x] GUI

  - [x] Container

    - [x] Top container

      - [ ] Display containing the number of remaining mines.
      - [ ] Display containing the time.
      - [ ] Reset button

    - [x] Bottom container

      - [x] Grid (9 x 9)

        - [x] Buttons

          - [] Empty cells
          - [ ] Cells containing a reference to the number of adjacent mines.
          - [ ] 10 cells containing mines.

# SCSS

- [ ] Responsive Design

  - [ ] Mobile-first design
  - [ ] Rescale for different screen dimensions.

- [ ] GUI

  - [ ] All cells start hidden from the user.

  - [ ] Cell types:

    - [ ] Empty cells contain no value, but are connected to all adjacent empty cells.

    - [ ] Cells containing reference numbers:

      - [ ] 1: Blue
      - [ ] 2: Green
      - [ ] 3: Yellow
      - [ ] 4: Purple
      - [ ] 5: Light Red
      - [ ] 6: Dark Red
      - [ ] 7: Orange
      - [ ] 8: Black

    - [ ] Cells containing mines:

      - [ ] Mine: Red
      - [ ] Remaining mines: Black.

  - [ ] Button hover feedback

  - [ ] Grid interaction disables when the game is won or lost.

# TypeScript

- [ ] Functionality

  - [ ] Top container

    - [ ] Display containing the number of remaining mines.

      - [ ] Counts down from 10 to zero with each flag planted.

    - [ ] Display containing the time.

      - [ ] Counts up from zero.

    - [ ] Reset button resets:

      - [ ] Mine display
      - [ ] Time display
      - [ ] Grid

        - [ ] Mine configuration
        - [ ] Reference number configuration
        - [ ] All revealed cells back to initial state.

  - [ ] Bottom container

    - [ ] Grid

      - [ ] Start timer on first grid interaction.

      - [ ] Ensure that the first cell is never a mine.

      - [ ] Left click, or short press, on a cell to reveal its value.

        - [ ] If cell is empty, reveals all connected empty cells.

        - [ ] If cell contains a reference number, no other cells are revealed.

        - [ ] If cell contains a mine, all remaining mines are revealed.

      - [ ] Right click, or long press, on a cell to plant a flag.

      - [ ] Detect when all cells that do not contain a mine have been revealed.

# Pseudocode

Global variables:

GRID_WIDTH = 9 GRID_HEIGHT = 9 MINE_COUNT = 10

Requirements:

Game Logic:

The game requires a grid of cells, represented as a two-dimensional array.

Each cell of the grid is to be a Cell type object, containing all necessary information:

    cellElement: button;
    xCoord: number;
    yCoord: number;
    isHidden: boolean;
    hasFlag: boolean;
    hasMine: boolean;
    adjacentMines: number;

A generateCell(x: number, y: number) function that generates Cell type objects.

    Input values are x and y coordinates, generated by a nested for loop.

    Properties of type boolean are set to default values.

    Returns a Cell type object.

    This function is called as a helper function to the generateGrid function.

A generateGrid(gridSize: number) function to generate a two-dimensional list of Cell type objects, representing the minesweeper grid.

Input values are grid dimensions, set as global variables.

Nested for loop:

      Generates a two-dimensional array, representing the minesweeper grid.

      Generates x and y coordinates.

      Calls the generateCell helper function at every index position in the two-dimensional array.

Returns a two-dimensional array of Cell type objects, representing the minesweeper grid.

An assignMines(grid: Cell[][], numberOfMines: number) function that uses pseudo random numbers to generate grid coordinates for mine placements.

Input values are a two-dimensional array of Cell type objects, and the number of mines, set as a global variable.

Initialise an assignedMine variable to track successful mine placements.

While assignedMines less than numberOfMines:

    Generate random cell coordinates:

      If cell already contains a mine, continue.

      Else, mine placement at that cell.

      Increment assignedMines.

Returns an array of successful mine placement grid coordinates.

An assignNumbers(grid: Cell[][], mineCoordinates: {xCoord: number, yCoord: number}[]) function that assigns each cell a value by counting the number of adjacent mine placements for every cell. This means the surrounding eight cells for every central cell, the surrounding five cells for every edge cell, and the surrounding three cells for every corner cell.

There are two options for this function:

Iterate over the grid and count the number of adjacent mine placements for every cell. This involves counting all adjacent mine placements and incrementing the adjacentMines property for each individual Cell type object, before moving on to the next cell of the grid.

Iterate over an array of mine placement coordinates and increment the adjacentMines property for each adjacent Cell type object directly. This involves incrementing the adjacentMines property of each adjacent Cell type object by 1, before moving on to the next mine placement in the array.

I favour the more direct appraoch of iterating over an array of mine placement coordinates:

Input values are a two-dimensional array of Cell type objects, representing the minesweeper grid, and an array of mine placement grid coordinates.

For loop:

    Iterate over the mineCoordinates array.

    Access x and y coordinates for each mine placement and pass them into a helper function.

An centralAdjacentCells(grid: Cell[][], xCoord: number, yCoord: number) helper function that applies a single increment to the adjacentMines property for each Cell type object, immediately adjacent to the mine placement coordinate.

This function requires several conditional statements to account for mine placements that occur at the edge of the grid, and for mine placements that occur in the corner of the grid.

Central placements logic, for central mine placements:

    If the x coordinate is greater than 0 and less than 8,
      and if the y coordinate is greater than 0 and less than 8.

    For loop:

      Iterate over a 3x3 subgrid where the current mine placement cell is the central cell of the subgrid.

      If hasMine property is true, continue.

        This step is the logic that skips the central cell of the subgrid, and any other adjacent mine placements.

      Else, increment adjacentMines property.

A function that counts the number of adjacent mines and assigns that value to each cell in the grid.

A function that detects when the user has won or lost.

A function that counts down from MINE_COUNT.

A function that resets the game.

A function that counts up from zero.

Interactivity:

A function that hover styles the cells of the grid.

Computer Interactivity:

A function that reveals the hidden value of a cell when the cell is left-clicked.

A function that plants a flag on a cell when the cell is right-clicked.

Mobile Interativity:

A function that reveals the hidden value of a cell when the cell is short pressed.

A function that plants a flag on a cell when the cell is long pressed.
